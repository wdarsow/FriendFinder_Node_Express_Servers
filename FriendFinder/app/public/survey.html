<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Friend Finder Survey Questions</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

</head>
<body>
    <div class="container">

        <h2>Friend Finder Survey Questions</h2>

        <h4>Name (Required)</h4>
        <input type="text" id="username" class="form-control" required="">

        <h4>Link to Your Photo (Required)</h4>
        <input type="text" id="image" class="form-control" required="">
        <hr>

            <h3><strong>Question 1</strong></h3>
            <h4>JavaScript is your favorite programming language.</h4>
        
            <select id="question1">
                <option value="">Choose an option</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>


            <h3><strong>Question 2</strong></h3>
            <h4>You prefer front-end web development vs. back-end web devlopment.</h4>
        
            <select id="question2">
                <option value="">Choose an option</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>

            <h3><strong>Question 3</strong></h3>
            <h4>VS Code is the best text editor.</h4>
        
            <select id="question3">
                <option value="">Choose an option</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>

            <h3><strong>Question 4</strong></h3>
            <h4>Notepad is better than MS Word.</h4>
        
            <select id="question4">
                <option value="">Choose an option</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>

            <h3><strong>Question 5</strong></h3>
            <h4>You enjoy doing web development homework on the weekend.</h4>
        
            <select id="question5">
                <option value="">Choose an option</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>

            <h3><strong>Question 6</strong></h3>
            <h4>You enjoy doing codecademy lessons.</h4>
        
            <select id="question6">
                <option value="">Choose an option</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>

            <h3><strong>Question 7</strong></h3>
            <h4>Node makes web development easier.</h4>
        
            <select id="question7">
                <option value="">Choose an option</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>

            <h3><strong>Question 8</strong></h3>
            <h4>You find it difficult to come up with variable names.</h4>
        
            <select id="question8">
                <option value="">Choose an option</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>

            <h3><strong>Question 9</strong></h3>
            <h4>You use const or let instead of var when programming.</h4>
        
            <select id="question9">
                <option value="">Choose an option</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>

            <h3><strong>Question 10</strong></h3>
            <h4>Web development is tough.</h4>
        
            <select id="question10">
                <option value="">Choose an option</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>
        <hr>
        <div>
            <a href=""><button class="btn btn-lg btn-primary" id="submit">Submit</button></a>
        </div>
        <hr>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/wdarsow/FriendFinder_Node_Express_Servers">GitHub Repo</a></p>
            </div>
        </footer>
    </div>

    <!-- Modal -->
    <div id="result-modal" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Best Match</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <p id="match-name"></p>
              <img id="match-image" src="" alt>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

    <script type="text/javascript">

    // when the submit button is pressed perform the following
    $("#submit").on("click", function(event) {
        event.preventDefault();

    // creates the userInput object based on values the user chose
        let userInput = {
            friendName: $("#username").val(),
            photo: $("#image").val(),
            scores: [
                $("#question1").val(),
                $("#question2").val(),
                $("#question3").val(),
                $("#question4").val(),
                $("#question5").val(),
                $("#question6").val(),
                $("#question7").val(),
                $("#question8").val(),
                $("#question9").val(),
                $("#question10").val()
            ]
        };
        
        $.post("/api/friends", userInput, function(data) {
            friends.push(userInput);
        });

// the checkMatch function takes the new array from the new survey being filled out
// and compares it to each of the other users' arrays that exist on the friends.js page
// it compares each array to the new array and gets the absolute difference between each
// index value and then adds up the total sum score for each of the array comparisons
// the totalDifference with the lowest number is the match that is displayed on the result-modal

/*
        let checkMatch = function() {
            $.get("/api/friends", function(req, res) {
            console.log("checkmatch running");
            let holdArray = [];
            for (let i = 0; i < req.length; i++) {
                for (let j = 0; j < req[i].scores.length; j++) {
                    holdArray.push[Math.abs(req[i].scores[j])]
                }
            }

            let score1 = [Math.abs(req[0].scores[0] - req[4].scores[0]), Math.abs(req[0].scores[1] - req[4].scores[1])]
            console.log(score1);
           // console.log(req[0].scores[0])
         // for(let i=0; i < req.length-1; i++) {
        //    let score1 = [Math.abs(req[0].scores[0] - req[5].scores[0]), Math.abs(req[0].scores[1] - req[5].scores[1]);
        //    console.log(score1);
        //    }
            //console.log(req);
            //console.log(req.length);
        });

        }
        checkMatch();
  */
  $.get("/api/friends", function(req, res) {
  
        // display the modal
        $("#result-modal").modal("toggle");
        $("#match-name").text(req[0].friendName);
        $("#match-image").attr("src", req[0].photo);

    });

});

    </script>
    
</body>
</html>